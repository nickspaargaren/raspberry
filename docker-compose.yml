version: '3'
services:
  torproxy:
    image: ufud/rpi-torproxy
    container_name: torproxy
    restart: always
    ports:
      - "9001:9001"
      - "9030:9030"
      - "9050:9050"
      - "8118:8118"

  homebridge:
    image: oznu/homebridge:latest
    container_name: homebridge
    restart: always
    ports:
      - "8581:8581"
    environment:
      - tz=Europe/Amsterdam
      - PGID=1000
      - PUID=1000
      - HOMEBRIDGE_CONFIG_UI=1
      - HOMEBRIDGE_CONFIG_UI_PORT=8581
    volumes:
      - ./homebridge:/homebridge

  domoticz:
    image: domoticz/domoticz
    container_name: domoticz
    restart: unless-stopped
    devices:
      - "/dev/serial/by-id/usb-FTDI_FT232R_USB_UART_AB54UCXR-if00-port0:/dev/ttyUSB0"
    ports:
      - "8080:8080"
    volumes:
      - ./config:/opt/domoticz/userdata
    environment:
      - TZ=Europe/Amsterdam